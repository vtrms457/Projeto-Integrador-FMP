-- Criando a tabela `usuarios`
CREATE TABLE `usuarios` (
  `id` INT NOT NULL AUTO_INCREMENT,  -- Definindo o campo id como chave primária e auto incremento
  `nome` VARCHAR(255) NOT NULL,
  `email` VARCHAR(255) NOT NULL,
  `senha` VARCHAR(255) NOT NULL,
  `tipo` ENUM('aluno', 'administrador', 'suspenso') NOT NULL,
  `data_cadastro` DATETIME NOT NULL,
  `telefone` VARCHAR(20),
  `foto_perfil` VARCHAR(255),
  PRIMARY KEY (`id`)  -- Definindo id como chave primária
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Criando a tabela `veiculos`
CREATE TABLE `veiculos` (
  `id` INT NOT NULL AUTO_INCREMENT,  -- Chave primária e auto incremento
  `usuario_id` INT NOT NULL,  -- Referencia ao usuário
  `placa` VARCHAR(20) NOT NULL,
  `marca` VARCHAR(50) NOT NULL,
  `cor` VARCHAR(30) NOT NULL,
  `tipo` ENUM('carro', 'moto') NOT NULL,
  PRIMARY KEY (`id`),  -- Definindo id como chave primária
  FOREIGN KEY (`usuario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE  -- Chave estrangeira para `usuarios`
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Criando a tabela `vagas`
CREATE TABLE `vagas` (
  `id` INT NOT NULL AUTO_INCREMENT,  -- Chave primária e auto incremento
  `numero` INT NOT NULL,
  `status` ENUM('disponivel', 'ocupada') NOT NULL DEFAULT 'disponivel',
  `veiculo_id` INT DEFAULT NULL,  -- Definindo o campo de chave estrangeira, permitindo NULL
  PRIMARY KEY (`id`),  -- Definindo id como chave primária
  FOREIGN KEY (`veiculo_id`) REFERENCES `veiculos` (`id`) ON DELETE SET NULL  -- Chave estrangeira para `veiculos`, permitindo que seja NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
