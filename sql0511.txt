-- Criando tabelas

CREATE TABLE `usuarios` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(255) NOT NULL,
  `email` VARCHAR(255) NOT NULL,
  `senha` VARCHAR(255) NOT NULL,
  `tipo` ENUM('aluno','administrador') NOT NULL,
  `data_cadastro` DATETIME NOT NULL,
  `telefone` VARCHAR(20),
  `foto_perfil` VARCHAR(255),
  PRIMARY KEY (`id`)
);

CREATE TABLE `vagas` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `numero` INT NOT NULL,
  `status` ENUM('disponivel','ocupada') NOT NULL DEFAULT 'disponivel',
  `veiculo_id` INT,
  PRIMARY KEY (`id`),
  FOREIGN KEY (`veiculo_id`) REFERENCES `veiculos` (`id`) ON DELETE SET NULL
);

CREATE TABLE `veiculos` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `usuario_id` INT NOT NULL,
  `placa` VARCHAR(20) NOT NULL,
  `marca` VARCHAR(50) NOT NULL,
  `cor` VARCHAR(30) NOT NULL,
  `tipo` ENUM('carro','moto') NOT NULL,
  PRIMARY KEY (`id`),
  FOREIGN KEY (`usuario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE
);
